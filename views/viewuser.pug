doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")
    title SkyScholars | Manage Users
    link(rel="stylesheet", href="/css/navbar-footer.css")
    link(rel="stylesheet", href="/css/viewuser.css")
  body
    include _header.pug

    main.user-container
      h1 Manage Users

      // Search Box
      input.search-box(type="text" placeholder="Search username...")

      if users.length
        table.user-table
          thead
            tr
              th Username
              th Email
              th Role
              th Actions
          tbody
            each u in users
              tr(data-username=u.username.toLowerCase())
                td #{u.username}
                td #{u.email}
                td #{u.role}
                td.action-buttons
                  a.btn-edit(href=`/edituser/${u.id}`) Edit
                  button.btn-delete(type="button" data-id=`${u.id}`) Delete

        // ✅ Back button below the table
        .back-container
          a.back-btn(href="/") ← Back

      else
        p.no-users No users found.

    // Hidden form for delete (submitted by JS after confirmation)
    form#deleteForm(method="POST")

    // Delete Confirmation Popup
    .modal#deleteModal
      .modal-content
        h2 Confirm Delete
        p Are you sure you want to delete this user?
        .modal-actions
          button#confirmDeleteBtn Confirm
          button#cancelDeleteBtn Cancel

    script(src="/js/viewuser.js")

    include _footer.pug
